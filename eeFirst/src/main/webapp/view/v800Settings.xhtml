<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
  xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions" 
  xmlns:o="http://omnifaces.org/ui" xmlns:of="http://omnifaces.org/functions"
  template="/templates/templateMain.xhtml">
  
<f:metadata>
  <f:viewAction action="#{layoutBean.initLayout('v800')}"></f:viewAction>/>
</f:metadata>
<ui:define name="layoutCenter">
    <p:tabView id="tabView" widgetVar="settingsTabview" >
      <p:tab id="registerTab" title="#{msg.register}"  titleStyleClass="takion" rendered="#{not loginBean.loggedIn}">
        <ui:include src="/fragment/register.xhtml"/>
      </p:tab>
      
       <p:tab id="updateInfoTab" title="#{msg.updateInfo}"  titleStyleClass="takion" rendered="#{loginBean.loggedIn}">
        <ui:include src="/fragment/updateInfo.xhtml"/>
      </p:tab>

      <p:tab id="generalSettingTab" title="#{msg.themeAndLanguage}" titleStyleClass="takion">
		<h:form id="settingsForm">
			<p:growl id="growl1" showDetail="true" />
			<p:panelGrid id="pg1" columns="2" cellpadding="50">

				<p:outputLabel id="themeLabel" for="themeSwitcher" value="#{msg.theme}" style="width:200px" />

				<p:themeSwitcher id="themeSwitcher" value="#{themeSwitcherBean.selectedTheme}" var="t" converter="selectThemeConverter" style="width:200px">
					<!--  <p:themeSwitcher id="themeSwitcher" value="#{themeSwitcher.selectedTheme}" var="t" converter="omnifaces.SelectItemsConverter" style="width:200px"> -->
					<f:selectItems value="#{themeSwitcherBean.themeList}" var="_theme" itemLabel="#{_theme.id} : #{_theme.displayName}" itemValue="#{_theme}" />
					<!-- <p:column>
            		    <h:outputText styleClass="ui-theme ui-theme-" style="display-block" />
    		        </p:column> -->
    		        
					<p:column>
						<p:outputLabel id="selectedThemeLabel" value="#{t.id} : #{t.displayName} " />
					</p:column>
					
					<p:ajax listener="#{themeSwitcherBean.saveTheme}" update="growl1" />
				</p:themeSwitcher>



				<p:outputLabel id="localeSelecterLabel" for="localeSelecter" value="#{msg.language}" style="width:200px" />
				<p:selectOneMenu id="localeSelecter" value="#{localeSelector.language}" style="width:200px">
					<f:selectItems value="#{localeSelector.availableLanguages}" />
					<!-- <p:ajax listener="#{localeSelector.language}" update="@(form)" /> -->
					<p:ajax listener="#{localeSelector.select()}" update="@(form)" />
				</p:selectOneMenu>

				<f:facet name="footer">
					<!-- <p:commandButton id="settingSaveButton" value="#{msg.save}" icon="ui-icon-check" action="#{localeSelector.select()}" /> -->
					<p:commandButton id="settingSaveButton" value="#{msg.save}" icon="inverse fa fa-check" action="#{localeSelector.select()}" />


				</f:facet>
			</p:panelGrid>

		</h:form>

	</p:tab>

    </p:tabView>
 </ui:define>
</ui:composition>