<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
	xmlns:f="http://xmlns.jcp.org/jsf/core" 
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui" xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:o="http://omnifaces.org/ui"  xmlns:of="http://omnifaces.org/functions">


  <h:form id="formMenuSetting" rendered="#{loginBean.loggedIn}">
  	<p:growl id="growl" showDetail="true" life="3000"/>
  	<p:panel>
  		<p:commandButton value="#{msg.save}" action="#{userMenuBean.save}" update="formMenuSetting:tableMegaMenu megaMenuForm:megaMenu formMenuSetting:growl"></p:commandButton>
  		<p:commandButton value="#{msg.default}" action="#{userMenuBean.fetchDefault}" update="formMenuSetting:tableMegaMenu megaMenuForm:megaMenu"></p:commandButton>
  	</p:panel>
  	
    <p:dataTable id="tableMegaMenu" value="#{userMenuBean.userMenuList}" var="_row" widgetVar="dtMegaMenu"
      emptyMessage="No History Data found with given criteria. Change the Dates"
      rowKey="#{_row}" rowIndexVar="rowIndex"
      selectionMode="single"
      sortMode="multiple" 
      editable="true" editMode="cell"
      resizableColumns="true" resizeMode="expand"
      scrollable="false" scrollHeight="500"
	  paginatorAlwaysVisible="true"
      paginator="true" paginatorPosition="bottom" rows="15"
      paginatorTemplate="{FirstPageLink} {PreviousPageLink} {JumpToPageDropdown} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
      rowsPerPageTemplate="10,15,25,50" 
      style="margin: 0.5em;" >
      	<p:ajax event="cellEdit" listener="#{userMenuBean.onEdit}" update="@(.ui-datatable)" />
      	<p:ajax event="contextMenu" listener="#{userMenuBean.onShowContext}"  />
      	
       
        <p:column headerText="#{msg.menuGroupOrder}" sortBy="#{_row.menuGroupOrder}" filterBy="#{_row.menuGroupOrder}" filterMatchMode="contains"  filterStyle="width:100%" >
           <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{_row.menuGroupOrder}" /></f:facet>
               <f:facet name="input"><p:inputText id="menuGroupOrderInput" value="#{_row.menuGroupOrder}" style="width:100%"/></f:facet>
           </p:cellEditor>
       </p:column>
       	
       <p:column headerText="#{msg.menuGroup}" sortBy="#{_row.menuGroup}" filterBy="#{_row.menuGroup}" filterMatchMode="contains"  filterStyle="width:100%" >
           <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{_row.menuGroup}" /></f:facet>
               <f:facet name="input"><p:inputText id="menuGroupInput" value="#{_row.menuGroup}" style="width:100%"/></f:facet>
           </p:cellEditor>
       </p:column>
       
       <p:column headerText="#{msg.menuColumn}" sortBy="#{_row.menuColumn}" filterBy="#{_row.menuColumn}" filterMatchMode="contains"  filterStyle="width:100%" >
           <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{_row.menuColumn}" /></f:facet>
               <f:facet name="input"><p:inputText id="menuColumnInput" value="#{_row.menuColumn}" style="width:100%"/></f:facet>
           </p:cellEditor>
       </p:column>
       
       <p:column headerText="#{msg.menuName}" sortBy="#{_row.menuName}" filterBy="#{_row.menuName}" filterMatchMode="contains"  filterStyle="width:100%" >
           <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{_row.menuName}" /></f:facet>
               <f:facet name="input"><p:inputText id="menuNameInput" value="#{_row.menuName}" style="width:100%"/></f:facet>
           </p:cellEditor>
       </p:column>
       
       <!--  <p:column headerText="#{msg.menuStyle}" sortBy="#{_row.menuStyle}" filterBy="#{_row.menuStyle}" filterMatchMode="contains"  filterStyle="width:100%" >
           <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{_row.menuStyle}" /></f:facet>
               <f:facet name="input"><p:inputText id="menuStyleInput" value="#{_row.menuStyle}" style="width:100%"/></f:facet>
           </p:cellEditor>
       </p:column> -->
       
       <p:column headerText="#{msg.menuIcon}" sortBy="#{_row.iconName}" filterBy="#{_row.iconName}" filterMatchMode="contains"  filterStyle="width:100%" >
           <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{_row.iconName}" /></f:facet>
               <f:facet name="input"><p:inputText id="menuIconInput" value="#{_row.iconName}" style="width:100%"/></f:facet>
           </p:cellEditor>
       </p:column>
       
      
       
       <p:column headerText="#{msg.menuId}" sortBy="#{_row.menuId}" filterBy="#{_row.menuId}" filterMatchMode="contains"  filterStyle="width:100%" >
           <p:cellEditor>
               <f:facet name="output"><h:outputText value="#{_row.menuId}" /></f:facet>
               <!-- <f:facet name="input"><p:inputText id="menuIdInput" value="#{_row.menu.menuId}" style="width:100%"/></f:facet> -->
               <!-- f:facet name="output">
               		<o:outputFormat value="#{_menu.menuId}" var="_menu" >
               			<f:param value="#{_row.menu}"></f:param>
               		</o:outputFormat> 
               		<h:outputText value="#{_row.menu.menuId}" />
               </f:facet>  -->
               <f:facet name="input">
	               <h:selectOneMenu value="#{_row.menuId}" style="width:100%"  >
	                  <f:selectItems value="#{menuMstBean.menuList}" var="_menu" itemLabel="#{_menu.menuId} : #{_menu.menuDesc}" itemValue="#{_menu.menuId}" />
	               </h:selectOneMenu>
                </f:facet>   
           </p:cellEditor>
       </p:column>
       <p:column id="urlCol" headerText="#{msg.menuUrl}" sortBy="#{_row.menu.menuUrl}" filterBy="#{_row.menu.menuUrl}" filterMatchMode="contains"  filterStyle="width:100%" >
       		<h:outputText value="#{_row.menu.menuUrl}" />
       </p:column>
       <p:column headerText="#{msg.urlParam}" sortBy="#{_row.urlParam}" filterBy="#{_row.urlParam}" filterMatchMode="contains"  filterStyle="width:100%" >
        	<h:outputText value="#{_row.urlParam}" />
       </p:column>
    </p:dataTable> 
    <p:contextMenu id="ctxMenuTable" for="tableMegaMenu">
    	<p:menuitem value="#{msg.copyAndAddRow}" action="#{userMenuBean.addRow}"  update="formMenuSetting:tableMegaMenu megaMenuForm:megaMenu growl"/>
    	<p:menuitem value="#{msg.deleteRow}" action="#{userMenuBean.deleteRow}"  update="formMenuSetting:tableMegaMenu megaMenuForm:megaMenu growl"/>
    </p:contextMenu>
   
  	
  </h:form>
</ui:composition>